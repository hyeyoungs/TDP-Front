<!doctype html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang=""> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8" lang=""> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9" lang=""> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js" lang="en">
<!--<![endif]-->

<!--Designerd by: http://bootstrapthemes.co-->

<head>
  <meta charset="utf-8">
  <title>Rage Freebie HTML5 Landing page</title>
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" type="image/png" href="favicon.ico">

  <!--Google Font link-->
  <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Raleway:400,600,700" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700" rel="stylesheet">


  <link rel="stylesheet" href="assets/css/slick.css">
  <link rel="stylesheet" href="assets/css/slick-theme.css">
  <link rel="stylesheet" href="assets/css/animate.css">
  <link rel="stylesheet" href="assets/css/fonticons.css">
  <link rel="stylesheet" href="assets/css/font-awesome.min.css">
  <link rel="stylesheet" href="assets/css/bootstrap.css">
  <link rel="stylesheet" href="assets/css/magnific-popup.css">
  <link rel="stylesheet" href="assets/css/bootsnav.css">


  <!--For Plugins external css-->
  <!--<link rel="stylesheet" href="assets/css/plugins.css" />-->

  <!--Theme custom css -->
  <link rel="stylesheet" href="assets/css/style.css">
  <!--<link rel="stylesheet" href="assets/css/colors/maron.css">-->

  <!--Theme Responsive css-->
  <link rel="stylesheet" href="assets/css/responsive.css" />

  <script src="assets/js/vendor/modernizr-2.8.3-respond-1.4.2.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

  <script>
    let flag = 0;
    let user_info = localStorage.getItem("username");

    $(document).ready(function (options, originalOptions, jqXHR) {
      login_check(options, originalOptions, jqXHR);
      list_til();
      read_flag();
      rank_til();
    });

    function login_check(options, originalOptions, jqXHR){
      if(localStorage.getItem('token')) {
        jqXHR.setRequestHeader('Authorization', 'Bearer ' + localStorage.getItem('token'));
      } else {
        alert("로그인 해주세요")
        location.href = "./index.html"
      }
    }

    $.ajaxPrefilter(function( options, originalOptions, jqXHR ) {
      login_check(options, originalOptions, jqXHR);
    });

    function list_til() {
      $.ajax({
        type: "GET",
        url: "/til_board",
        data: {},
        success: function (response) {
          let all_til = response;
          console.log(all_til);
          let max = 4;
          if (all_til.length < 4) {
            max = all_til.length;
          }
          for (let i = 0; i < max; i++) {
            let title = all_til[i]['til_title'];
            let user = all_til[i]['user']['nickname'];
            let content = all_til[i]['til_content'];
            let day = all_til[i]['createdAt'];

            let tempHtml=`
            <div class="col-md-4">
              <div class="service_item">
                <i class="icofont icofont-light-bulb"></i>
                <h3 class="m-top-30">${title}</h3>
                <div class="separator_small"></div>
                <p>${content} </p>
                <h5>${user}</h5>
              </div>
            </div>`
            console.log(tempHtml)
            $('#board-main').append(tempHtml)
          }
        }
      })
    }

    function read_flag() {
      let today = new Date();
      let result_date;

      $.ajax({
        type: "GET",
        url: "/til/user",
        data: {},
        success: function (response) {
          let all_til = response;

          for (let i = 0; i < all_til.length; i++) {
            let day = all_til[i]['createdAt'];
            result_date = new Date(day);
            console.log(today.toDateString());
            console.log(result_date.toDateString());
            try {
              if (today.toDateString() === result_date.toDateString()) {
                $(".test").css("background-color", 'blue');
              } else {
                $(".test").css("background-color", 'red');// display 속성을 block 으로 바꾼다.
              }
            }catch (e) {
              console.log("작성된 TIL이 없습니다.")
            }
          }
        }
      })
    }
    function logMyErrors(){
      $(".test").css("background-color", 'black');// display 속성을 block 으로 바꾼다.
    }
    function rank_til() {
        $.ajax({
                type: "GET",
                url: "/til/ranker",
                data: {},
                success: function (response) {

                    console.log(response);
                    for (let i = 0; i < response.length; i++) {
                        let username = response[i]['username'];
                        let til = response[i]['til_count'];
                        let temp = `<h6 id="rank_username"><i class="fa fa-angle-right"></i>${username}</h6>
                                            <div>
                                              <div class="content">
                                                <p id="rank_countTil">${til}</p>

                                              </div>
                                            </div>`

                        let temp_html=
                            `<h6 class="open"><i class="about_accordion wow fadeIn faq_main_content fa fa-angle-right"></i> ${username}</h6>
                                <div class="open">
                                  <div class="content">
                                    <p id="rank_countTil">${til}</p>
                                  </div>
                                </div>`

                        $('#faq_main_content').append(temp_html);

                    }

                }
            }
        )
    }

    function sign_out() {
      localStorage.removeItem("token");
      localStorage.removeItem("username");
      location.href = '/';
    }


  </script>
</head>
<style>

  .left_write {
    margin-right: 100px;
  }


  .test {

    float: right;
    width: 200px;
    height: 200px;
    background-color: yellow;
    display: block;
    margin-left: 50px;
    margin-top: 0px;

  }

</style>

<body data-spy="scroll" data-target=".navbar-collapse">


<!-- Preloader -->
<div id="loading">
  <div id="loading-center">
    <div id="loading-center-absolute">
      <div class="object" id="object_one"></div>
      <div class="object" id="object_two"></div>
      <div class="object" id="object_three"></div>
      <div class="object" id="object_four"></div>
    </div>
  </div>
</div>
<!--End off Preloader -->


<div class="culmn">
  <!--Home page style-->



  <nav class="navbar navbar-light navbar-expand-lg  navbar-fixed white no-background bootsnav">
    <!-- Start Top Search -->
    <div class="top-search">
      <div class="container">
        <div class="input-group">
          <span class="input-group-addon"><i class="fa fa-search"></i></span>
          <input type="text" class="form-control" placeholder="Search">
          <span class="input-group-addon close-search"><i class="fa fa-times"></i></span>
        </div>
      </div>
    </div>
    <!-- End Top Search -->

    <div class="container">
      <!-- Start Atribute Navigation -->
      <div class="attr-nav">
        <ul>

          <li class="search"><a href="#"><i class="fa fa-search"></i></a></li>
          <li class="side-menu"><a href="#"><i class="fa fa-bars"></i></a></li>
        </ul>
      </div>
      <!-- End Atribute Navigation -->

      <!-- Start Header Navigation -->
      <div class="navbar-header">
        <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-menu">
          <span></span>
          <span></span>
          <span></span>
        </button>

        <a class="navbar-brand" style="color: whitesmoke;font-size: x-large;" href="./home.html"><strong>TDP</strong></a>
      </div>
      <!-- End Header Navigation -->

      <!-- Collect the nav links, forms, and other content for toggling -->
      <div class="collapse navbar-collapse" id="navbar-menu">
        <ul class="nav navbar-nav navbar-right" data-in="fadeInDown" data-out="fadeOutUp">

          <li><a class="nav-link " href="./til_board.html">Write TIL</a></li>
          <li><a class="nav-link" href="./mytil_page.html">My TIL</a></li>
          <li><a class="nav-link" href="https://github.com/">Github</a></li>
          <li><a class="nav-link" href="./my_page.html">myPage</a></li>
          <li><a class="nav-link" onclick="sign_out()">logout</a></li>
        </ul>
      </div>
      <!-- /.navbar-collapse -->
    </div>


    <!-- Start Side Menu -->
    <div class="side">
      <a href="#" class="close-side"><i class="fa fa-times"></i></a>
      <div class="widget">
        <h6 class="title">Custom Pages</h6>
        <ul class="link">
          <li><a href="#">About</a></li>
          <li><a href="#">Services</a></li>
          <li><a href="#">Blog</a></li>
          <li><a href="#">Portfolio</a></li>
          <li><a href="#">Contact</a></li>
        </ul>
      </div>
      <div class="widget">
        <h6 class="title">Additional Links</h6>
        <ul class="link">
          <li><a href="#">Retina Homepage</a></li>
          <li><a href="#">New Page Examples</a></li>
          <li><a href="#">Parallax Sections</a></li>
          <li><a href="#">Shortcode Central</a></li>
          <li><a href="#">Ultimate Font Collection</a></li>
        </ul>
      </div>
    </div>
    <!-- End Side Menu -->

  </nav>

  <!--Home Sections-->

  <section id="hello" class="home bg-mega">
    <div class="overlay"></div>
    <div class="container">
      <div class="row">
        <div class="main_home">
          <div class="home_text">
            <h1 class="text-white">WE’RE <br /> TIL Management Service!<span>
          <div class="test rounded-circle" ></div>

          </span></h1>

          </div>

        </div>

      </div>

      </div>
      <!--End off row-->


    <!--End off container -->
  </section>
  <!--End off Home Sections-->


  <!--About Sections-->
  <section id="about" class="about roomy-100">
    <div class="container">
      <div class="row">
        <div class="main_about">
          <div class="col-md-6">
            <div class="about_content">
              <h2><strong>RANK</strong></h2>
              <div class="separator_left"></div>
              <p>가장 많은 til 보유자</p>
            </div>
          </div>
          <div class="col-md-6">
            <div class="about_accordion wow fadeIn">
              <div id="faq_main_content" class="faq_main_content">
<!--                <h6 id="rank_username "><i class="fa fa-angle-right"></i> </h6>-->
<!--                <div>-->
<!--                  <div class="content">-->
<!--                    <p id="rank_countTil"></p>-->

<!--                  </div>-->
<!--                </div>-->
                <!-- End off accordion item-1 -->

<!--                <h6 class="open"><i class="fa fa-angle-right"></i> EXPERIENCE TEAM</h6>-->
<!--                <div class="open">-->
<!--                  <div class="content">-->
<!--                    <p>Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat. Ut wisi enim ad minim veniam, </p>-->
<!--                  </div>-->
<!--                </div>-->
                <!-- End off accordion item-2 -->


              </div>
            </div>
          </div>
        </div>
      </div>
      <!--End off row-->
    </div>
    <!--End off container -->


  </section>
  <!--End off About section -->




  <!--Service Section-->
  <section id="service" class="service">
    <div class="container">
      <div class="row">
        <div class="main_service roomy-100">
          <div class="col-md-8 col-sm-10 mr-md-auto ml-md-auto mr-sm-auto ml-sm-auto">
            <div class="head_title text-center">
              <h2><strong>OUR TILS</strong></h2>
              <div class="separator_auto"></div>
              <p>사용자들이 작성한 TIL 입니다.</p>
            </div>
          </div>
          <div class="row" id="board-main">


          </div>
        </div>
      </div>
      <!--End off row -->
    </div>
    <!--End off container -->
  </section>
  <!--End off Featured section-->

  <!--Blog Section-->
  <section id="blog" class="blog">
    <div class="container">
      <div class="row">
        <div class="main_blog text-center roomy-100">
          <div class="col-sm-8 mr-sm-auto ml-sm-auto">
            <div class="head_title text-center">
              <h2>RECENT BLOGS</h2>
              <div class="separator_auto"></div>
              <p>Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt tation ullamcorper suscipit lobortis nisl ut aliquip ex ea commodo consequat. </p>
            </div>
          </div>

          <div class="row">

            <div class="col-md-4">
              <div class="blog_item m-top-20">
                <div class="blog_item_img">
                  <img src="assets/images/Blog/1.jpg" alt="" />
                </div>
                <div class="blog_text roomy-40">
                  <h6>PLEASUARE WITHOUT CONSCIENCE</h6>
                  <p><em><a href="">May 15, 2016</a> /<a href="">admin</a>/<a href=""> Co-working</a></em></p>
                </div>
              </div>
            </div>
            <div class="col-md-4">
              <div class="blog_item m-top-20">
                <div class="blog_item_img">
                  <img src="assets/images/Blog/2.jpg" alt="" />
                </div>
                <div class="blog_text roomy-40">
                  <h6>PLEASUARE WITHOUT CONSCIENCE</h6>
                  <p><em><a href="">May 15, 2016</a> /<a href="">admin</a>/<a href=""> Co-working</a></em></p>
                </div>
              </div>
            </div>
            <div class="col-md-4">
              <div class="blog_item m-top-20">
                <div class="blog_item_img">
                  <img src="assets/images/Blog/3.jpg" alt="" />
                </div>
                <div class="blog_text roomy-40">
                  <h6>PLEASUARE WITHOUT CONSCIENCE</h6>
                  <p><em><a href="">May 15, 2016</a> /<a href="">admin</a>/<a href=""> Co-working</a></em></p>
                </div>
              </div>
            </div>

          </div>
        </div>
      </div>
      <!--End off row -->
    </div>
    <!--End off container -->
  </section>
  <!-- End off Blog section-->






  <!-- scroll up-->
  <div class="scrollup">
    <a href="#"><i class="fa fa-chevron-up"></i></a>
  </div>
  <!-- End off scroll up -->


  <footer id="footer" class="footer bg-black">
    <div class="container">
      <div class="row">
        <div class="main_footer text-center p-top-40 p-bottom-30">
          <p class="wow fadeInRight" data-wow-duration="1s">
            Made with
            <i class="fa fa-heart"></i> by
            <a target="_blank" href="https://bootstrapthemes.co">Bootstrap Themes</a> 2016. All Rights Reserved
          </p>
        </div>
      </div>
    </div>
  </footer>




</div>

<!-- JS includes -->

<script src="assets/js/vendor/jquery-1.11.2.min.js"></script>
<script src="assets/js/vendor/popper.min.js"></script>
<script src="assets/js/vendor/bootstrap.min.js"></script>

<script src="assets/js/jquery.magnific-popup.js"></script>
<script src="assets/js/jquery.easing.1.3.js"></script>
<script src="assets/js/slick.min.js"></script>
<script src="assets/js/jquery.collapse.js"></script>
<script src="assets/js/bootsnav.js"></script>


<!-- paradise slider js -->


<script src="http://maps.google.com/maps/api/js?key=AIzaSyD_tAQD36pKp9v4at5AnpGbvBUsLCOSJx8"></script>
<script src="assets/js/gmaps.min.js"></script>
<script src="assets/js/plugins.js"></script>
<script src="assets/js/main.js"></script>

</body>

</html>
